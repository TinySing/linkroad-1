webpackJsonp([8],{"L9J/":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={name:"PersonMan",data:function(){return{searchDataTest:"",valueAdd:[],joinAddValue:[],dutyAddValue:[],total:null,totalOne:null,totalTwo:null,totalTest:null,pageSize:5,pageSizes:[5,10,15,20],pageSizeOne:8,pageSizeTwo:8,pageSizeTest:6,currentPage:1,currentPageOne:1,currentPageTwo:1,currentPageTest:1,centerDialogOne:!1,centerDialogTwo:!1,centerDialogThree:!1,centerDialogFour:!1,centerDialogTest:!1,options:[{valueOne:"",label:"全部"},{valueOne:"JT",label:"集团"},{valueOne:"SX",label:"寿险"},{valueOne:"CX",label:"产险"}],tableData:[],tableDataTest:[],sysListOne:[],sysListTwo:[],valueOne:"",searchData:"",importantIndex:"",loading:!0}},methods:{getAddIndex:function(t){this.getSystem(),this.centerDialogTest=!0,this.importantIndex=t},getSystem:function(){var t=this,e=a("mw3O"),n={pageNum:this.currentPageTest,pageSize:this.pageSizeTest,projectInfo:this.searchDataTest};this.$axios.post("/monitorCon/system/project/queryCascadeProject",e.stringify(n)).then(function(e){t.totalTest=e.data.total,t.tableDataTest=[];for(var a=0;a<e.data.list.length;a++)t.tableDataTest.push({projectname:e.data.list[a].projectname,projectid:e.data.list[a].projectid})})},searchButTest:function(){this.currentPageTest=1,this.getSystem(),""===this.searchDataTest&&alert("查询条件不能为空，请重新输入")},resetTest:function(){this.searchDataTest="",this.getSystem()},handleDialogClose:function(){this.centerDialogTest=!1,this.searchDataTest=""},chooseDuty:function(t,e,n){var s=this;this.userId=n[this.importantIndex].userId,this.systemId=e[t].projectid;var o=a("mw3O"),i={projectId:this.systemId,part:"2",userId:this.userId};this.$axios.post("/monitorCon/system/userProject/add",o.stringify(i)).then(function(t){"success"===t.data.type&&s.$message({message:"添加责任系统成功！",type:"success"}),"fail"===t.data.type&&s.$message.error("添加失败，此人已是该项目负责人！！！"),s.getSystem()})},chooseJoin:function(t,e,n){var s=this;this.userId=n[this.importantIndex].userId,this.systemId=e[t].projectid;var o=a("mw3O"),i={projectId:this.systemId,part:"1",userId:this.userId};this.$axios.post("/monitorCon/system/userProject/add",o.stringify(i)).then(function(t){"success"===t.data.type&&s.$message({message:"添加参与系统成功！",type:"success"}),"fail"===t.data.type&&s.$message.error("添加失败，此人已是该项目参与人！！！"),s.getSystem()})},dutyLoading:function(){var t=this,e=this.$loading({lock:!0,text:"正在加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});setTimeout(function(){e.close(),t.centerDialogOne=!0},500)},joinLoading:function(){var t=this,e=this.$loading({lock:!0,text:"正在加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});setTimeout(function(){e.close(),t.centerDialogTwo=!0},500)},deleteDuty:function(t,e,n,s){var o=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.splice(t,1),o.totalOne=n.length,o.deluserId=s[o.importantIndex].userId;var i=a("mw3O"),r={userId:o.deluserId,projectId:e.sysCode,part:"2"};o.$axios.post("/monitorCon/system/userProject/delete",i.stringify(r)).then(function(t){o.$message({type:"success",message:"删除成功!"})})}).catch(function(){o.$message({type:"info",message:"已取消删除"})})},deleteJoin:function(t,e,n,s){var o=this;this.$confirm("此操作将永久删除该项目, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.splice(t,1),o.totalTwo=n.length,o.deluserId=s[o.importantIndex].userId;var i=a("mw3O"),r={userId:o.deluserId,projectId:e.sysCode,part:"1"};o.$axios.post("/monitorCon/system/userProject/delete",i.stringify(r)).then(function(t){o.$message({type:"success",message:"删除成功!"})})}).catch(function(){o.$message({type:"info",message:"已取消删除"})})},duty:function(t,e){var n=this;this.importantIndex=t,this.userId=e[t].userId;var s=a("mw3O"),o={userId:this.userId,part:"2"};this.$axios.post("/monitorCon/system/project/queryByUser",s.stringify(o)).then(function(t){n.sysListOne=[];for(var e=0;e<t.data.length;e++)n.sysListOne.push({sysCode:t.data[e].projectid,sysName:t.data[e].projectname});n.totalOne=n.sysListOne.length})},join:function(t,e){var n=this;this.importantIndex=t,this.userId=e[t].userId;var s=a("mw3O"),o={userId:this.userId,part:"1"};this.$axios.post("/monitorCon/system/project/queryByUser",s.stringify(o)).then(function(t){n.sysListTwo=[];for(var e=0;e<t.data.length;e++)n.sysListTwo.push({sysIndex:e+1,sysCode:t.data[e].projectid,sysName:t.data[e].projectname});n.totalTwo=n.sysListTwo.length})},changeCode:function(){this.currentPage=1,this.getPerson()},reset:function(){this.valueOne="",this.searchData="",this.getPerson()},searchBut:function(){this.currentPage=1,this.getPerson(),""===this.searchData&&alert("查询条件不能为空，请重新输入")},getPerson:function(){var t=this,e=a("mw3O"),n={pageNum:this.currentPage,pageSize:this.pageSize,userInfo:this.searchData,companyCode:this.valueOne};this.$axios.post("/monitorCon/system/user/query",e.stringify(n)).then(function(e){t.total=e.data.total,t.tableData=[];for(var a=0;a<e.data.list.length;a++)"Y"===e.data.list[a].enable?e.data.list[a].enable="正常":e.data.list[a].enable="停用",null===e.data.list[a].deptInfo&&t.tableData.push({userId:e.data.list[a].userId,name:e.data.list[a].userName,valid:e.data.list[a].enable}),null!=e.data.list[a].deptInfo&&t.tableData.push({userId:e.data.list[a].userId,name:e.data.list[a].userName,valid:e.data.list[a].enable,descr:e.data.list[a].deptInfo.descr,descrShort:e.data.list[a].deptInfo.descrShort,sigUpDescr:e.data.list[a].deptInfo.sigUpDescr});t.loading=!1})},change:function(t){this.$forceUpdate()},handleSizeChange:function(t){this.pageSize=t,this.currentPage=1,this.getPerson()},handleCurrentChange:function(t){this.currentPage=t,this.getPerson()},handleCurrentChangeOne:function(t){this.currentPageOne=t},handleCurrentChangeTwo:function(t){this.currentPageTwo=t},handleCurrentChangeTest:function(t){this.currentPageTest=t,this.getSystem()},handleChange:function(t,e,a){}},computed:{},created:function(){this.total=this.tableData.length},mounted:function(){this.getPerson()},watch:{centerDialogOne:{handler:function(t,e){this.currentPageOne=1}},centerDialogTwo:{handler:function(t,e){this.currentPageTwo=1}}}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"person_main"},[a("i",[t._v("当前位置：人员管理")]),t._v(" "),a("div",{staticClass:"top_area"},[a("el-input",{staticClass:"search",attrs:{type:"text",placeholder:"姓名/用户名"},on:{input:function(e){return t.change(e)}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchBut(e)}},model:{value:t.searchData,callback:function(e){t.searchData=e},expression:"searchData"}}),t._v(" "),a("div",{staticClass:"but"},[a("button",{on:{click:t.searchBut}},[t._v("查询")]),t._v(" "),a("button",{staticStyle:{"margin-left":"15px!important"},on:{click:t.reset}},[t._v("重置")])]),t._v(" "),a("el-select",{staticStyle:{float:"right",width:"105px","margin-top":"2.5vh","margin-right":"28px"},attrs:{filterable:"",placeholder:t.valueOne,size:"small"},on:{change:t.changeCode},model:{value:t.valueOne,callback:function(e){t.valueOne=e},expression:"valueOne"}},t._l(t.options,function(t){return a("el-option",{key:t.valueOne,attrs:{label:t.label,value:t.valueOne}})}),1)],1),t._v(" "),a("div",{staticClass:"bottom_area",staticStyle:{padding:"3vh 15px 0"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%",display:"block","font-size":"12px","max-height":"51vh",overflow:"auto"},attrs:{"header-cell-style":{background:"#f0f5f9",color:"#666",borderRight:"none"},data:t.tableData,"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(251, 255, 242, 0.8)",border:"",height:"80%"}},[a("el-table-column",{attrs:{prop:"people",label:"人员信息",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.name))]),t._v(" "),a("p",[t._v(t._s(e.row.sigUpDescr)+" "+t._s(e.row.descr))]),t._v(" "),a("p",[t._v(t._s(e.row.descrShort))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"责任系统",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{on:{click:t.dutyLoading}},[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.duty(e.$index,t.tableData)}}},[t._v("\n              查看相关责任系统\n            ")])],1),t._v(" "),a("el-dialog",{attrs:{title:"责任系统","close-on-click-modal":!1,visible:t.centerDialogOne,width:"633",center:""},on:{"update:visible":function(e){t.centerDialogOne=e}}},[a("div",{staticClass:"dialogBox",staticStyle:{"padding-bottom":"10px"}},[a("div",{staticClass:"diaBox"},[a("el-table",{attrs:{"header-cell-style":{background:"#f0f5f9",color:"#666"},border:"",data:t.sysListOne.slice((t.currentPageOne-1)*t.pageSizeOne,t.currentPageOne*t.pageSizeOne)}},[a("el-table-column",{attrs:{prop:"sysCode",label:"系统代码"}}),t._v(" "),a("el-table-column",{attrs:{prop:"sysName",label:"系统名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"sysName",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticStyle:{"text-decoration":"underline"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return t.deleteDuty(e.$index,e.row,t.sysListOne,t.tableData)}}},[t._v("\n                        删除\n                      ")])]}}],null,!0)})],1)],1)]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("div",{staticClass:"block",staticStyle:{"margin-left":"auto"}},[a("el-pagination",{attrs:{"current-page":t.currentPageOne,"page-size":t.pageSizeOne,layout:"total,prev,pager, next",total:t.totalOne},on:{"current-change":t.handleCurrentChangeOne}})],1)])])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"参与系统",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{on:{click:t.joinLoading}},[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.join(e.$index,t.tableData)}}},[t._v("\n              查看相关参与系统\n            ")])],1),t._v(" "),a("el-dialog",{attrs:{title:"参与系统","close-on-click-modal":!1,visible:t.centerDialogTwo,center:""},on:{"update:visible":function(e){t.centerDialogTwo=e}}},[a("div",{staticClass:"dialogBox",staticStyle:{"padding-bottom":"10px"}},[a("div",{staticClass:"diaBox"},[a("el-table",{attrs:{"header-cell-style":{background:"#f0f5f9",color:"#666"},border:"",data:t.sysListTwo.slice((t.currentPageTwo-1)*t.pageSizeTwo,t.currentPageTwo*t.pageSizeTwo)}},[a("el-table-column",{attrs:{prop:"sysCode",label:"系统代码"}}),t._v(" "),a("el-table-column",{attrs:{prop:"sysName",label:"系统名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"sysName",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticStyle:{"text-decoration":"underline"},attrs:{type:"danger",size:"mini"},on:{click:function(a){return t.deleteJoin(e.$index,e.row,t.sysListTwo,t.tableData)}}},[t._v("\n                        删除\n                      ")])]}}],null,!0)})],1)],1)]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("div",{staticClass:"block",staticStyle:{"margin-left":"auto"}},[a("el-pagination",{attrs:{"current-page":t.currentPageTwo,"page-size":t.pageSizeTwo,layout:"total,prev,pager, next",total:t.totalTwo},on:{"current-change":t.handleCurrentChangeTwo}})],1)])])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"valid",label:"用户有效性",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"address",label:"操作参与系统",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticStyle:{"text-decoration":"underline"},attrs:{type:"text",size:"small"},on:{click:function(a){return t.getAddIndex(e.$index,e.row)}}},[t._v("\n            添加\n          ")]),t._v(" "),a("el-dialog",{attrs:{title:"人员相关系统","before-close":t.handleDialogClose,"close-on-click-modal":!1,visible:t.centerDialogTest,width:"633",center:""},on:{"update:visible":function(e){t.centerDialogTest=e}}},[a("div",{staticClass:"diaBox",staticStyle:{"margin-top":"10px","margin-left":"2.7vh"}},[a("el-input",{staticClass:"search",attrs:{type:"text",placeholder:"系统编号/系统名称"},on:{input:function(e){return t.change(e)}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchButTest(e)}},model:{value:t.searchDataTest,callback:function(e){t.searchDataTest=e},expression:"searchDataTest"}}),t._v(" "),a("div",{staticClass:"but"},[a("button",{on:{click:t.searchButTest}},[t._v("查询")]),t._v(" "),a("button",{staticStyle:{"margin-left":"15px!important"},on:{click:t.resetTest}},[t._v("重置")])]),t._v(" "),a("el-table",{staticStyle:{width:"100%",display:"block","font-size":"12px","max-height":"51vh",overflow:"auto"},attrs:{"header-cell-style":{background:"#f0f5f9",color:"#666",borderRight:"none"},data:t.tableDataTest,border:""}},[a("el-table-column",{attrs:{prop:"projectid",label:"系统编号",align:"center",width:"70"}}),t._v(" "),a("el-table-column",{attrs:{prop:"projectname",label:"系统名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"handle",label:"操作责任系统",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticStyle:{cursor:"pointer"},on:{click:function(a){return t.chooseDuty(e.$index,t.tableDataTest,t.tableData)}}},[a("el-button",{attrs:{type:"text",size:"small"}},[t._v("\n                        添加责任系统\n                      ")])],1)]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{prop:"handle",label:"操作参与系统",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticStyle:{cursor:"pointer"},on:{click:function(a){return t.chooseJoin(e.$index,t.tableDataTest,t.tableData)}}},[a("el-button",{attrs:{type:"text",size:"small"}},[t._v("\n                        添加参与系统\n                      ")])],1)]}}],null,!0)})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("div",{staticClass:"block",staticStyle:{width:"600px",height:"6vh","margin-top":"3vh",left:"40vw"}},[a("el-pagination",{attrs:{background:"","current-page":t.currentPageTest,"page-size":t.pageSizeTest,layout:"total,prev, pager, next",total:t.totalTest},on:{"current-change":t.handleCurrentChangeTest}})],1)])])]}}])})],1),t._v(" "),a("div",{staticClass:"block",staticStyle:{width:"600px",height:"6vh","margin-top":"3vh",left:"40vw"}},[a("el-pagination",{attrs:{background:"","current-page":t.currentPage,"page-sizes":t.pageSizes,"page-size":t.pageSize,layout:"total,sizes,prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)])},staticRenderFns:[]};var o=a("VU/8")(n,s,!1,function(t){a("sY4D")},"data-v-50c2eafa",null);e.default=o.exports},sY4D:function(t,e){}});
//# sourceMappingURL=8.2a635b6d984658fb6377.js.map